(self.webpackChunkargon_dashboard_pro_angular=self.webpackChunkargon_dashboard_pro_angular||[]).push([[407],{8407:function(e,t,o){"use strict";o.r(t),o.d(t,{AggregatedModule:function(){return A}});var r=o(1116),n=o(6728),i=o(146),a=o(7647),c=o(4762),u=o(9847),s=o(4455),g=o(529),l=o(483),p=o(2693),d=o(6691),h=function(){function e(e,t,o,r,n,i){this.http=e,this.route=t,this.route2=o,this.alertService=r,this.snackBar=n,this.authService=i,this.baseUrl=g.N.base_url}return e.prototype.getGroups=function(){var e=this.http.get(this.baseUrl+"/api/groups_config",this.authService.httpOptions());return this.authService.onRequest(e)},e.\u0275fac=function(t){return new(t||e)(l.LFG(p.eN),l.LFG(i.F0),l.LFG(i.gz),l.LFG(s.c),l.LFG(d.c),l.LFG(u.e))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Z=function(){function e(e,t,o,r,n,i){this.http=e,this.route=t,this.route2=o,this.alertService=r,this.snackBar=n,this.authService=i,this.baseUrl=g.N.base_url}return e.prototype.getGroups=function(){var e=this.http.get(this.baseUrl+"/api/agg_groups",this.authService.httpOptions());return this.authService.onRequest(e)},e.prototype.addCenterToGroup=function(e,t){var o=this.http.post(this.baseUrl+"/api/agg_groups/"+e,{center:t},this.authService.httpOptions());return this.authService.onRequest(o)},e.prototype.deleteCenter=function(e,t){var o=this.http.delete(this.baseUrl+"/api/agg_groups/"+e+"/"+t,this.authService.httpOptions());return this.authService.onRequest(o)},e.prototype.updateAggName=function(e,t){var o=this.http.put(this.baseUrl+"/api/agg_groups/"+e,{new_name:t},this.authService.httpOptions());return this.authService.onRequest(o)},e.prototype.deleteGroup=function(e){var t=this.http.delete(this.baseUrl+"/api/agg_groups/"+e,this.authService.httpOptions());return this.authService.onRequest(t)},e.\u0275fac=function(t){return new(t||e)(l.LFG(p.eN),l.LFG(i.F0),l.LFG(i.gz),l.LFG(s.c),l.LFG(d.c),l.LFG(u.e))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function f(e,t){if(1&e){var o=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"button",40),l.NdJ("click",function(){var e=l.CHM(o).row;return l.oxw().deleteCenter(e)}),l.TgZ(2,"span",24),l._UZ(3,"i",41),l.qZA(),l.TgZ(4,"span",20),l._uU(5," Remove "),l.qZA(),l.qZA(),l.qZA()}}var v=function(){function e(e,t,o,r,n){this.route=e,this.router=t,this.alerService=o,this.aggGroupService=r,this.groupsConfigService=n,this.groupName="",this.entries=10,this.temp=[],this.selected=[],this.groupRows=[],this.uniqueCenters=[]}return e.prototype.ngOnInit=function(){var e=this;this.groupName=this.route.snapshot.paramMap.get("groupname"),this.alerService.loading("Loading Centers....."),this.aggGroupService.getGroups().subscribe(function(t){e.groupRows=t.filter(function(t){if(t.group_name==e.groupName)return t}),e.loadData(e.groupRows),e.alerService.closeLoading()}),this.groupsConfigService.getGroups().subscribe(function(t){e.uniqueCenters=t})},e.prototype.ChangeGroupName=function(){var e=this;this.alerService.customUpdateAggName().then(function(t){t.isConfirmed&&(e.alerService.loading("Updating group name..."),e.aggGroupService.updateAggName(e.groupName,t.value.name).subscribe(function(t){e.router.navigate(["/aggregated/group/"+t.new_name]),e.alerService.closeLoading()}))})},e.prototype.deleteCenter=function(e){var t=this;this.alerService.confirm("Wait!","Do you really need to delete this center?").then(function(o){o.isConfirmed&&(t.alerService.loading("Deleting Center..."),t.aggGroupService.deleteCenter(t.groupName,e.center).subscribe(function(e){t.alerService.closeLoading(),t.groupRows=t.groupRows.filter(function(t){if(t.center!=e.center)return t}),t.loadData(t.groupRows)}),console.log(e))})},e.prototype.newCenter=function(){var e=this,t=this.groupRows.map(function(e){return e.center.toLowerCase()});this.alerService.customNewAggCenter(t,this.uniqueCenters).then(function(t){t.isConfirmed&&(e.alerService.loading("Adding new Center..."),e.aggGroupService.addCenterToGroup(e.groupName,t.value.center).subscribe(function(t){e.alerService.closeLoading(),e.groupRows.push(t),e.loadData(e.groupRows)}))})},e.prototype.entriesChange=function(e){this.entries=e.target.value},e.prototype.filterTable=function(e){var t=e.target.value;this.temp=this.groupRows.filter(function(e){for(var o in e)if(-1!==("number"==typeof e[o]?e[o].toString():e[o]).toLowerCase().indexOf(t.toLowerCase()))return!0;return!1})},e.prototype.onSelect=function(e){var t,o=e.selected;this.selected.splice(0,this.selected.length),(t=this.selected).push.apply(t,o)},e.prototype.onActivate=function(e){this.activeRow=e.row},e.prototype.onSelectRed=function(e){console.log(e)},e.prototype.onSelectBlue=function(e){console.log(e)},e.prototype.gotoDetail=function(e){this.router.navigate(["/aggregated/group/"+e.group_name])},e.prototype.loadData=function(e){this.temp=e.map(function(e,t){return(0,c.pi)({},e)})},e.\u0275fac=function(t){return new(t||e)(l.Y36(i.gz),l.Y36(i.F0),l.Y36(s.c),l.Y36(Z),l.Y36(h))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-group-detail"]],decls:57,vars:12,consts:[[1,"header","bg-danger","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-white","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-home"],[1,"col-lg-6","col-5","text-right"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col"],[1,"card"],[1,"card-header"],[1,"col-md-10"],[1,"mb-0"],["type","button",1,"btn","btn-icon","btn-info",3,"click"],[1,"btn-inner--text"],[1,"text-sm","mb-0"],[1,"col-md-2"],["type","button",1,"btn","btn-icon","btn-success","btn-block",3,"click"],[1,"btn-inner--icon"],[1,"ni","ni-fat-add"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","10",3,"selected"],["value","25",3,"selected"],["value","50",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["prop","center"],["name","Actions"],["ngx-datatable-cell-template",""],["type","button",1,"btn","btn-icon","btn-danger",3,"click"],[1,"ni","ni-scissors"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"h6",5),l._uU(6,"Aggregated - Groups"),l.qZA(),l.TgZ(7,"nav",6),l.TgZ(8,"ol",7),l.TgZ(9,"li",8),l.TgZ(10,"a",9),l._UZ(11,"i",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(12,"div",11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",12),l.TgZ(14,"div",13),l.TgZ(15,"div",14),l.TgZ(16,"div",15),l.TgZ(17,"div",16),l.TgZ(18,"div",13),l.TgZ(19,"div",17),l.TgZ(20,"h3",18),l._uU(21),l.TgZ(22,"button",19),l.NdJ("click",function(){return t.ChangeGroupName()}),l.TgZ(23,"span",20),l._uU(24," Edit "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"p",21),l._uU(26),l.qZA(),l.qZA(),l.TgZ(27,"div",22),l.TgZ(28,"button",23),l.NdJ("click",function(){return t.newCenter()}),l.TgZ(29,"span",24),l._UZ(30,"i",25),l.qZA(),l.TgZ(31,"span",20),l._uU(32," New "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"div",26),l.TgZ(34,"div",13),l.TgZ(35,"div",27),l.TgZ(36,"div",28),l.TgZ(37,"label"),l._uU(38," Show "),l.TgZ(39,"select",29),l.NdJ("change",function(e){return t.entriesChange(e)}),l.TgZ(40,"option",30),l._uU(41,"10"),l.qZA(),l.TgZ(42,"option",31),l._uU(43,"25"),l.qZA(),l.TgZ(44,"option",32),l._uU(45,"50"),l.qZA(),l.TgZ(46,"option",33),l._uU(47,"All"),l.qZA(),l.qZA(),l._uU(48," entries "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(49,"div",27),l.TgZ(50,"div",34),l.TgZ(51,"label"),l.TgZ(52,"input",35),l.NdJ("keyup",function(e){return t.filterTable(e)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(53,"ngx-datatable",36),l.NdJ("activate",function(e){return t.onActivate(e)}),l._UZ(54,"ngx-datatable-column",37),l.TgZ(55,"ngx-datatable-column",38),l.YNc(56,f,6,0,"ng-template",39),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(21),l.hij("",t.groupName," - Centers "),l.xp6(5),l.hij(" This is a list of centers from ",t.groupName," aggregated group shown at grafana "),l.xp6(14),l.Q6J("selected",10==t.entries),l.xp6(2),l.Q6J("selected",25==t.entries),l.xp6(2),l.Q6J("selected",50==t.entries),l.xp6(2),l.Q6J("selected",-1==t.entries),l.xp6(7),l.Q6J("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=t.entries?t.entries:void 0)("rows",t.temp))},directives:[n.YN,n.Kr,a.nE,a.UC,a.vq],styles:[".bg-danger[_ngcontent-%COMP%]{background-color:#f5a036!important}"]}),e}();function b(e,t){if(1&e){var o=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"button",39),l.NdJ("click",function(){var e=l.CHM(o).row;return l.oxw().gotoDetail(e)}),l.TgZ(2,"span",22),l._UZ(3,"i",40),l.qZA(),l.TgZ(4,"span",24),l._uU(5," Details "),l.qZA(),l.qZA(),l.TgZ(6,"button",41),l.NdJ("click",function(){var e=l.CHM(o).row;return l.oxw().deleteGroup(e)}),l.TgZ(7,"span",22),l._UZ(8,"i",42),l.qZA(),l.TgZ(9,"span",24),l._uU(10," Remove "),l.qZA(),l.qZA(),l.qZA()}}var m=[{path:"",redirectTo:"groups",pathMatch:"full"},{path:"",children:[{path:"groups",component:function(){function e(e,t,o){this.router=e,this.alerService=t,this.aggGroupService=o,this.entries=10,this.temp=[],this.selected=[],this.groupRows=[]}return e.prototype.ngOnInit=function(){var e=this;this.alerService.loading("Loading Groups....."),this.aggGroupService.getGroups().subscribe(function(t){console.log(e.uniques(t)),e.groupRows=e.uniques(t),e.loadData(e.groupRows),e.alerService.closeLoading()})},e.prototype.deleteGroup=function(e){var t=this;this.alerService.confirm("Wait!","Do you really need to delete this group?").then(function(o){o.isConfirmed&&(t.alerService.loading("Deleting Group..."),t.aggGroupService.deleteGroup(e.group_name).subscribe(function(o){t.alerService.closeLoading(),t.groupRows=t.groupRows.filter(function(t){if(t.group_name!=e.group_name)return t}),t.loadData(t.groupRows)}),console.log(e))})},e.prototype.uniques=function(e){return Array.from(new Set(e.map(function(e){return e.group_name}))).map(function(e){return{group_name:e}})},e.prototype.entriesChange=function(e){this.entries=e.target.value},e.prototype.filterTable=function(e){var t=e.target.value;this.temp=this.groupRows.filter(function(e){for(var o in e)if(-1!==("number"==typeof e[o]?e[o].toString():e[o]).toLowerCase().indexOf(t.toLowerCase()))return!0;return!1})},e.prototype.onSelect=function(e){var t,o=e.selected;this.selected.splice(0,this.selected.length),(t=this.selected).push.apply(t,o)},e.prototype.onActivate=function(e){this.activeRow=e.row},e.prototype.onSelectRed=function(e){console.log(e)},e.prototype.onSelectBlue=function(e){console.log(e)},e.prototype.gotoDetail=function(e){this.router.navigate(["/aggregated/group/"+e.group_name])},e.prototype.loadData=function(e){this.temp=e.map(function(e,t){return(0,c.pi)({},e)})},e.\u0275fac=function(t){return new(t||e)(l.Y36(i.F0),l.Y36(s.c),l.Y36(Z))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-groups"]],decls:54,vars:10,consts:[[1,"header","bg-danger","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-white","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-home"],[1,"col-lg-6","col-5","text-right"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col"],[1,"card"],[1,"card-header"],[1,"col-md-10"],[1,"mb-0"],[1,"text-sm","mb-0"],[1,"col-md-2"],["type","button",1,"btn","btn-icon","btn-success","btn-block"],[1,"btn-inner--icon"],[1,"ni","ni-fat-add"],[1,"btn-inner--text"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","10",3,"selected"],["value","25",3,"selected"],["value","50",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["prop","group_name","name","Name"],["name","Actions"],["ngx-datatable-cell-template",""],["type","button",1,"btn","btn-icon","btn-primary",3,"click"],[1,"ni","ni-ruler-pencil"],["type","button",1,"btn","btn-icon","btn-danger",3,"click"],[1,"ni","ni-scissors"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"h6",5),l._uU(6,"Aggregated - Groups"),l.qZA(),l.TgZ(7,"nav",6),l.TgZ(8,"ol",7),l.TgZ(9,"li",8),l.TgZ(10,"a",9),l._UZ(11,"i",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(12,"div",11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",12),l.TgZ(14,"div",13),l.TgZ(15,"div",14),l.TgZ(16,"div",15),l.TgZ(17,"div",16),l.TgZ(18,"div",13),l.TgZ(19,"div",17),l.TgZ(20,"h3",18),l._uU(21,"Groups"),l.qZA(),l.TgZ(22,"p",19),l._uU(23," This is a list of aggregated groups configuration to show at grafana "),l.qZA(),l.qZA(),l.TgZ(24,"div",20),l.TgZ(25,"button",21),l.TgZ(26,"span",22),l._UZ(27,"i",23),l.qZA(),l.TgZ(28,"span",24),l._uU(29," New "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(30,"div",25),l.TgZ(31,"div",13),l.TgZ(32,"div",26),l.TgZ(33,"div",27),l.TgZ(34,"label"),l._uU(35," Show "),l.TgZ(36,"select",28),l.NdJ("change",function(e){return t.entriesChange(e)}),l.TgZ(37,"option",29),l._uU(38,"10"),l.qZA(),l.TgZ(39,"option",30),l._uU(40,"25"),l.qZA(),l.TgZ(41,"option",31),l._uU(42,"50"),l.qZA(),l.TgZ(43,"option",32),l._uU(44,"All"),l.qZA(),l.qZA(),l._uU(45," entries "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(46,"div",26),l.TgZ(47,"div",33),l.TgZ(48,"label"),l.TgZ(49,"input",34),l.NdJ("keyup",function(e){return t.filterTable(e)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(50,"ngx-datatable",35),l.NdJ("activate",function(e){return t.onActivate(e)}),l._UZ(51,"ngx-datatable-column",36),l.TgZ(52,"ngx-datatable-column",37),l.YNc(53,b,11,0,"ng-template",38),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(37),l.Q6J("selected",10==t.entries),l.xp6(2),l.Q6J("selected",25==t.entries),l.xp6(2),l.Q6J("selected",50==t.entries),l.xp6(2),l.Q6J("selected",-1==t.entries),l.xp6(7),l.Q6J("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=t.entries?t.entries:void 0)("rows",t.temp))},directives:[n.YN,n.Kr,a.nE,a.UC,a.vq],styles:[".bg-danger[_ngcontent-%COMP%]{background-color:#f5a036!important}"]}),e}()},{path:"group/:groupname",component:v}]}],A=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.ez,i.Bz.forChild(m),n.u5,a.xD]]}),e}()}}]);